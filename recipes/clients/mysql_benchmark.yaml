client:
  name: mysql_benchmark
  description: MySQL benchmark client using sysbench
  container_image: mysql_client.sif

  container:
    # This image already has sysbench installed
    docker_source: "docker://severalnines/sysbench"
    image_path: "/mnt/tier2/users/u103300/mysql_client.sif"
    force_rebuild: true

  target_service:
    name: mysql
    port: 3306

  resources:
    time: "00:45:00"
    qos: default
    partition: cpu
    nodes: 1
    ntasks: 1
    ntasks_per_node: 1
    mem: "4GB"

  duration: 300

  environment:
    MYSQL_USER: "benchmark_user"
    MYSQL_PASSWORD: "benchmark_pass"
    MYSQL_DATABASE: "benchmark_db"

  parameters:
    num_connections: 16
    transactions_per_client: 300
    tables: 10
    table_size: 100000