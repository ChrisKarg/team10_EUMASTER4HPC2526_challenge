# Redis Parametric Benchmark Client Configuration
# This recipe runs comprehensive parameter sweeps across multiple configurations
# to collect performance data for analysis and plotting

client:
  name: redis_parametric_benchmark
  description: Redis Parametric Benchmark Suite - Full Parameter Sweep
  container_image: redis_latest.sif
  duration: 14400  # 4 hours for comprehensive sweep

  # Container configuration
  container:
    docker_source: "docker://redis:7-alpine"
    image_path: "$HOME/containers/redis_latest.sif"

  # Resource requirements (SLURM job configuration)
  resources:
    partition: cpu
    time: "04:00:00"  # 4 hours
    qos: default
    nodes: 1
    ntasks: 1
    ntasks_per_node: 1
    mem: "4GB"  # More memory for collecting large result sets

  # Environment variables
  environment:
    BENCHMARK_TYPE: "redis_parametric"
    BENCHMARK_MODE: "parametric"

  # Parametric benchmark configuration
  parameters:
    # Parameter sweep ranges (comma-separated)
    # These will be passed to the parametric script
    client_counts: "1,10,50,100,200,500"
    data_sizes: "64,256,1024,4096,16384,65536"  # bytes
    pipeline_depths: "1,4,16,64,256"
    
    # Test configuration
    operations_per_test: 100000
    tests: "set,get,lpush,lpop,sadd,hset,spop,zadd,zpopmin"
    
    # Orchestrator settings
    wait_for_service: 60
    parametric_mode: true  # Flag to use parametric script

  # Target service configuration
  target_service:
    name: redis
    port: 6379
    health_check_endpoint: "redis://localhost:6379"

  # Script configuration
  script:
    name: "redis_parametric_benchmark.py"
    local_path: "benchmark_scripts/"
    remote_path: "$HOME/benchmark_scripts/"

