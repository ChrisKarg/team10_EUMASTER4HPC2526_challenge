# Redis Benchmark Client Configuration (Native Wrapper)
client:
  name: redis_benchmark
  description: Native Redis Benchmark Client
  container_image: redis_latest.sif # Uses the Redis image which contains the benchmark tool
  duration: 600 

  # Container configuration
  container:
    # The image containing redis-benchmark
    docker_source: "docker://redis:7-alpine"
    image_path: "$HOME/containers/redis_latest.sif"

  # Resource requirements (SLURM job configuration)
  resources:
    partition: cpu
    time: "00:30:00"
    qos: default
    nodes: 1
    ntasks: 1
    ntasks_per_node: 1
    mem: "2GB"

  # Environment variables
  environment:
    BENCHMARK_TYPE: "redis_native"

  # Benchmark parameters
  parameters:
    # Core redis-benchmark flags
    num_operations: 100000        # -n
    clients: 50                   # -c
    value_size: 256               # -d
    pipeline: 1                   # -P
    native_tests: "ping,set,get"  # -t (comma separated)
    
    # Orchestrator settings
    wait_for_service: 60          # Wait time for service to be ready

  # Target service configuration
  target_service:
    name: redis
    port: 6379
    health_check_endpoint: "redis://localhost:6379"

  # Script configuration
  script:
    name: "redis_benchmark.py"
    local_path: "benchmark_scripts/"
    remote_path: "$HOME/benchmark_scripts/"
